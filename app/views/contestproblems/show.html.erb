<%= render 'contestproblems/show' %>

<!-- Nouvelle solution -->
<% if !@contestsolution.nil? %>
  <hr>
  <% if current_user.can_write_submission? %>
    <%= render 'contestsolutions/show_in_progress' %>
  <% else %>
    <p class="mb-2">Pour pouvoir rédiger une solution à un problème, vous devez d'abord compléter les chapitres suivants :</p>
    <%= render 'submissions/chapters_to_write_submission' %>
  <% end %>
<% end %>

<% if @contestproblem.in_correction? && !@contest.is_organized_by_or_root(current_user) %>
  <hr><p class="text-center">Ce problème est en cours de correction.</p>
<% end %>

<% if @contest.is_organized_by_or_admin(current_user) && @contestproblem.at_most(:in_progress) %>
  <% official_sol = @contestproblem.contestsolutions.where(:official => true).first %>
  <% if @contestproblem.at_most(:not_started_yet) %>
    <hr><p class="text-center">Ce problème n'est pas encore en ligne. Pour modifier sa solution, <%= link_to "cliquer ici", contestproblem_contestsolution_path(@contestproblem, official_sol) %>.</p>
  <% else %>
    <hr><p class="text-center">Ce problème est en train d'être résolu par les participants. Pour modifier sa solution, <%= link_to "cliquer ici", contestproblem_contestsolution_path(@contestproblem, official_sol) %>.</p>
  <% end %>
<% end %>

<% if @contestproblem.in_progress? && !has_enough_points(current_user) %>
  <hr><p class="text-center">Pour pouvoir participer aux concours, il faut avoir au moins 200 points.</p>
<% end %>
